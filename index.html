<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Base - Buy & Sell Bitcoin, Ethereum, and more with trust</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            overflow-x: hidden;
        }
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }
        .logo {
            font-size: 2rem;
            font-weight: bold;
            color: #0052ff;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .logo::before {
            content: '‚óè';
            font-size: 1.5rem;
            background: linear-gradient(135deg, #0052ff, #1652f0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }
        .nav-links a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            transition: color 0.3s ease;
            position: relative;
        }
        .nav-links a:hover { color: #0052ff; }
        .nav-links a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -5px;
            left: 0;
            background: linear-gradient(135deg, #0052ff, #1652f0);
            transition: width 0.3s ease;
        }
        .nav-links a:hover::after { width: 100%; }
        .auth-buttons { display: flex; gap: 1rem; }
        .btn {
            padding: 0.7rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        .btn-primary {
            background: linear-gradient(135deg, #0052ff, #1652f0);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 82, 255, 0.3);
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 82, 255, 0.4);
        }
        .btn-secondary {
            background: transparent;
            color: #333;
            border: 2px solid #e5e5e5;
        }
        .btn-secondary:hover {
            border-color: #0052ff;
            color: #0052ff;
        }
        .hero {
            background: linear-gradient(135deg, #0052ff 0%, #1652f0 50%, #00d4ff 100%);
            padding: 8rem 2rem 6rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        .hero::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            animation: gridMove 20s linear infinite;
        }
        @keyframes gridMove {
            0% { transform: translateX(0) translateY(0); }
            100% { transform: translateX(10px) translateY(10px); }
        }
        .hero-content {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
        }
        .hero h1 {
            font-size: 3.5rem;
            font-weight: 800;
            color: white;
            margin-bottom: 1.5rem;
            line-height: 1.1;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .hero p {
            font-size: 1.3rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 3rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        .hero-buttons {
            display: flex;
            gap: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
        }
        .btn-large {
            padding: 1rem 2rem;
            font-size: 1.1rem;
            border-radius: 12px;
        }
        .btn-white {
            background: white;
            color: #0052ff;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        .btn-white:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }
        .features {
            padding: 6rem 2rem;
            background: #f8f9fa;
        }
        .features-container { max-width: 1200px; margin: 0 auto; }
        .features h2 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 3rem;
            color: #333;
        }
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        .feature-card {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 0, 0, 0.05);
            animation: fadeInUp 0.6s ease forwards;
        }
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
        }
        .feature-card:nth-child(2) { animation-delay: 0.1s; }
        .feature-card:nth-child(3) { animation-delay: 0.2s; }
        .feature-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #0052ff, #1652f0);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
        }
        .feature-card h3 {
            font-size: 1.4rem;
            margin-bottom: 1rem;
            color: #333;
        }
        .feature-card p {
            color: #666;
            line-height: 1.6;
        }
        .stats {
            background: linear-gradient(135deg, #1a1a1a, #2d2d2d);
            padding: 4rem 2rem;
            text-align: center;
        }
        .stats-container { max-width: 1200px; margin: 0 auto; }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
        }
        .stat-item { color: white; }
        .stat-number {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #00d4ff, #0052ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }
        .stat-label {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.8);
        }
        .cta {
            background: white;
            padding: 6rem 2rem;
            text-align: center;
        }
        .cta-container { max-width: 800px; margin: 0 auto; }
        .cta h2 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            color: #333;
        }
        .cta p {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 3rem;
        }
        .footer {
            background: #1a1a1a;
            color: white;
            padding: 3rem 2rem 1rem;
        }
        .footer-container { max-width: 1200px; margin: 0 auto; }
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }
        .footer-section h4 {
            margin-bottom: 1rem;
            color: #0052ff;
        }
        .footer-section a {
            color: #ccc;
            text-decoration: none;
            display: block;
            margin-bottom: 0.5rem;
            transition: color 0.3s ease;
        }
        .footer-section a:hover { color: #0052ff; }
        .footer-bottom {
            border-top: 1px solid #333;
            padding-top: 2rem;
            text-align: center;
            color: #666;
        }
        .mobile-menu-toggle {
            display: none;
            flex-direction: column;
            cursor: pointer;
            padding: 0.5rem;
        }
        .mobile-menu-toggle span {
            width: 25px;
            height: 3px;
            background: #333;
            margin: 2px 0;
            transition: 0.3s;
        }
        @media (max-width: 768px) {
            .nav-links { 
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: rgba(255, 255, 255, 0.98);
                backdrop-filter: blur(10px);
                flex-direction: column;
                padding: 1rem 2rem;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
                border-top: 1px solid rgba(0, 0, 0, 0.1);
                gap: 1rem;
                z-index: 999;
            }
            .nav-links.active { display: flex; }
            .mobile-menu-toggle { display: flex; }
            .hero h1 { font-size: 2.5rem; }
            .hero p { font-size: 1.1rem; }
            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }
            .features h2 { font-size: 2rem; }
            .auth-buttons { display: none; }
            .nav { position: relative; }
            .mobile-auth-buttons {
                display: flex;
                gap: 1rem;
                padding-top: 1rem;
                margin-top: 1rem;
                border-top: 1px solid rgba(0, 0, 0, 0.1);
                justify-content: center;
            }
            .mobile-auth-buttons .btn {
                flex: 1;
                text-align: center;
                justify-content: center;
            }
        }
        @media (min-width: 769px) {
            .mobile-auth-buttons { display: none; }
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f8f9fa; }
    .modal-overlay { position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.3);display:none;align-items:center;justify-content:center;z-index:3000;}
    .modal-overlay.active { display:flex; }
    .modal { background: #fff; border-radius: 14px; max-width: 400px; width:95%; padding: 2rem 1.5rem; position:relative; }
    .modal-close { position:absolute;right:1rem;top:1rem;font-size:1.3rem;background:none;border:none;color:#aaa;cursor:pointer;}
    .error-message {color:#e11d48; font-size:.96rem;}
    .btn { padding:.6rem 1.2rem; border-radius:6px; border:none; cursor:pointer; font-weight:600;}
    .btn-primary {background:linear-gradient(135deg,#0052ff,#1652f0);color:#fff;}
    .btn-secondary {background:#fff; border:2px solid #0052ff; color:#0052ff;}
    .btn-primary:disabled { opacity:.65; }
  </style>
</head>
<body>
<div id="mainLanding">
    <!-- Header -->
    <header class="header">
        <nav class="nav">
            <a href="#" class="logo">Base</a>
            <ul class="nav-links">
                <li><a href="#prices">Prices</a></li>
                <li><a href="#learn">Learn</a></li>
                <li class="mobile-auth-buttons">
                    <a href="#" id="openSignInModalMobile" class="btn btn-secondary">Sign in</a>
                    <a href="#" id="openSignUpModalMobile" class="btn btn-primary">Sign up</a>
                </li>
            </ul>
            <div class="auth-buttons">
                <a href="#" id="openSignInModal" class="btn btn-secondary">Sign in</a>
                <a href="#" id="openSignUpModalDesktop" class="btn btn-primary">Sign up</a>
            </div>
            <div class="mobile-menu-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </nav>
    </header>
    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1>Buy & sell crypto on the<br>world's leading platform</h1>
            <p>Join 100+ million people who trust Base to buy, sell, and manage all crypto securely.</p>
            <div class="hero-buttons">
                <a href="#" id="openSignUpModalHero" class="btn btn-white btn-large">Sign up</a>
                <a href="#learn" class="btn btn-primary btn-large">Learn more</a>
            </div>
        </div>
    </section>
    <!-- Features Section -->
    <section class="features" id="learn">
        <div class="features-container">
            <h2>Why choose Base?</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">üîí</div>
                    <h3>Most trusted</h3>
                    <p>Base is the world's most trusted way to join the crypto revolution. We make it safe and simple for you to buy, sell, and hold cryptocurrency.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üìä</div>
                    <h3>Lowest fees</h3>
                    <p>Buy and sell popular digital currencies, keep track of them in one place, and earn rewards for using Base products.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üöÄ</div>
                    <h3>Best security</h3>
                    <p>We store the vast majority of the digital assets in secure offline storage, and cryptocurrency stored on Base is covered by our insurance policy.</p>
                </div>
            </div>
        </div>
    </section>
    <!-- Stats Section -->
    <section class="stats" id="prices">
        <div class="stats-container">
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-number">$335B+</div>
                    <div class="stat-label">Quarterly volume traded</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">100M+</div>
                    <div class="stat-label">Verified users</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">100+</div>
                    <div class="stat-label">Countries supported</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">200+</div>
                    <div class="stat-label">Supported cryptocurrencies</div>
                </div>
            </div>
        </div>
    </section>
    <section class="cta">
        <div class="cta-container">
            <h2>Start your crypto journey today</h2>
            <p>Create your account and get verified in minutes. You can buy crypto with a credit card or bank transfer.</p>
            <a href="#" id="openSignUpModalCta" class="btn btn-primary btn-large">Get started now</a>
        </div>
    </section>
    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Products</h4>
                    <a href="#">Buy/Sell Cryptocurrency</a>
                    <a href="#">Base Pro</a>
                    <a href="#">Base Prime</a>
                    <a href="#">Developer Platform</a>
                    <a href="#">Base Commerce</a>
                </div>
                <div class="footer-section">
                    <h4>Learn</h4>
                    <a href="#">Crypto basics</a>
                    <a href="#">Tips & tutorials</a>
                    <a href="#">Market updates</a>
                    <a href="#">What is Bitcoin?</a>
                    <a href="#">What is Ethereum?</a>
                </div>
                <div class="footer-section">
                    <h4>Company</h4>
                    <a href="#">About</a>
                    <a href="#">Careers</a>
                    <a href="#">Press</a>
                    <a href="#">Legal & privacy</a>
                    <a href="#">Cookie policy</a>
                </div>
                <div class="footer-section">
                    <h4>Support</h4>
                    <a href="#">Help center</a>
                    <a href="#">Contact us</a>
                    <a href="#">Create account</a>
                    <a href="#">ID verification</a>
                    <a href="#">Account information</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Base, Inc. All rights reserved.</p>
            </div>
        </div>
    </footer>
</div>

<!-- SIGN IN MODAL -->
<div class="modal-overlay" id="signInModal">
  <div class="modal">
    <button class="modal-close" id="closeSignInModal">&times;</button>
    <h2>Sign in to Base</h2>
    <form id="signInForm" autocomplete="off">
      <div>
        <label for="signin-email">Email address</label>
        <input type="email" id="signin-email" name="email" required placeholder="your@email.com" />
        <div id="emailError" class="error-message"></div>
      </div>
      <div>
        <label for="signin-password">Password</label>
        <input type="password" id="signin-password" name="password" required minlength="8" placeholder="Password" />
        <div id="passwordError" class="error-message"></div>
      </div>
      <button type="submit" class="btn btn-primary" id="signInBtn">Sign in</button>
      <div id="signInSuccess" style="color: #10b981; text-align:center; margin-top:10px; display:none;"></div>
      <div id="signInFail" style="color: #e11d48; text-align:center; margin-top:10px; display:none;"></div>
      <a href="#" class="forgot-link" id="openForgotPasswordModal">Forgot your password?</a>
      <a href="#" class="signup-link" id="openSignUpModalFromSignIn">Don't have an account? Sign up</a>
    </form>
  </div>
</div>

<!-- SIGN UP MODAL -->
<div class="modal-overlay" id="signUpModal">
  <div class="modal">
    <button class="modal-close" id="closeSignUpModal">&times;</button>
    <h2>Create your account</h2>
    <form id="signUpForm" autocomplete="off">
      <div>
        <label for="signup-fullname">Full name</label>
        <input type="text" id="signup-fullname" name="fullname" required placeholder="Enter your full name" />
        <div id="fullnameError" class="error-message"></div>
      </div>
      <div>
        <label for="signup-email">Email address</label>
        <input type="email" id="signup-email" name="email" required placeholder="your@email.com" />
        <div id="signupEmailError" class="error-message"></div>
      </div>
      <div>
        <label for="signup-password">Password</label>
        <input type="password" id="signup-password" name="password" required minlength="8" placeholder="Create a password (8+ characters)" />
        <div id="signupPasswordError" class="error-message"></div>
      </div>
      <div>
        <label for="signup-confirm-password">Confirm password</label>
        <input type="password" id="signup-confirm-password" name="confirmPassword" required minlength="8" placeholder="Confirm your password" />
        <div id="confirmPasswordError" class="error-message"></div>
      </div>
      <button type="submit" class="btn btn-primary" id="signUpBtn">Create account</button>
      <div id="signUpSuccess" style="color: #10b981; text-align:center; margin-top:10px; display:none;"></div>
      <div id="signUpFail" style="color: #e11d48; text-align:center; margin-top:10px; display:none;"></div>
      <a href="#" class="signup-link" id="openSignInModalFromSignUp">Already have an account? Sign in</a>
    </form>
  </div>
</div>

<!-- FORGOT PASSWORD MODAL -->
<div class="modal-overlay" id="forgotPasswordModal">
  <div class="modal">
    <button class="modal-close" id="closeForgotPasswordModal">&times;</button>
    <h2>Reset Password</h2>
    <form id="forgotPasswordForm" autocomplete="off">
      <div>
        <label for="forgot-email">Email address</label>
        <input type="email" id="forgot-email" required placeholder="Your email" />
        <div id="forgotEmailError" class="error-message"></div>
      </div>
      <div>
        <label for="forgot-password">New password</label>
        <input type="password" id="forgot-password" required minlength="8" placeholder="New password" />
        <div id="forgotPasswordError" class="error-message"></div>
      </div>
      <div>
        <label for="forgot-confirm-password">Confirm new password</label>
        <input type="password" id="forgot-confirm-password" required minlength="8" placeholder="Confirm password" />
        <div id="forgotConfirmPasswordError" class="error-message"></div>
      </div>
      <button type="submit" class="btn btn-primary" id="forgotPasswordBtn">Reset password</button>
      <div id="forgotPasswordSuccess" style="color: #10b981; text-align:center; margin-top:10px; display:none;"></div>
      <div id="forgotPasswordFail" style="color: #e11d48; text-align:center; margin-top:10px; display:none;"></div>
    </form>
  </div>
</div>

<script>
const signInForm = document.getElementById('signInForm');
const signUpForm = document.getElementById('signUpForm');
const forgotPasswordForm = document.getElementById('forgotPasswordForm');
const SHEETDB_API = "https://sheetdb.io/api/v1/sbath1xpp3h1u";

// -- NAVIGATION --
const mobileToggle = document.querySelector('.mobile-menu-toggle');
const navLinks = document.querySelector('.nav-links');
mobileToggle.addEventListener('click', (e) => {
    e.stopPropagation();
    navLinks.classList.toggle('active');
});
document.addEventListener('click', (e) => {
    if (!navLinks.contains(e.target) && !mobileToggle.contains(e.target)) navLinks.classList.remove('active');
});
navLinks.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', () => { navLinks.classList.remove('active'); });
});
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        const target = document.querySelector(this.getAttribute('href'));
        if (target) { e.preventDefault(); target.scrollIntoView({ behavior: 'smooth', block: 'start' }); }
    });
});
window.addEventListener('scroll', () => {
    const header = document.querySelector('.header');
    if (window.scrollY > 100) {
        header.style.background = 'rgba(255, 255, 255, 0.98)';
        header.style.boxShadow = '0 2px 20px rgba(0, 0, 0, 0.1)';
    } else {
        header.style.background = 'rgba(255, 255, 255, 0.95)';
        header.style.boxShadow = 'none';
    }
});

// -- MODALS OPEN/CLOSE --
function openModal(modal) { modal.classList.add('active'); }
function closeModal(modal) { modal.classList.remove('active'); }
document.getElementById('openSignInModal').onclick = e => { e.preventDefault(); openModal(document.getElementById('signInModal')); };
document.getElementById('openSignInModalMobile').onclick = e => { e.preventDefault(); navLinks.classList.remove('active'); openModal(document.getElementById('signInModal')); };
document.getElementById('closeSignInModal').onclick = () => { closeModal(document.getElementById('signInModal')); signInForm.reset(); };
document.getElementById('openSignUpModalDesktop').onclick = e => { e.preventDefault(); openModal(document.getElementById('signUpModal')); };
document.getElementById('openSignUpModalMobile').onclick = e => { e.preventDefault(); navLinks.classList.remove('active'); openModal(document.getElementById('signUpModal')); };
document.getElementById('openSignUpModalHero').onclick = e => { e.preventDefault(); openModal(document.getElementById('signUpModal')); };
document.getElementById('openSignUpModalCta').onclick = e => { e.preventDefault(); openModal(document.getElementById('signUpModal')); };
document.getElementById('openSignUpModalFromSignIn').onclick = e => { e.preventDefault(); closeModal(document.getElementById('signInModal')); openModal(document.getElementById('signUpModal')); };
document.getElementById('closeSignUpModal').onclick = () => { closeModal(document.getElementById('signUpModal')); signUpForm.reset(); };
document.getElementById('openSignInModalFromSignUp').onclick = e => { e.preventDefault(); closeModal(document.getElementById('signUpModal')); openModal(document.getElementById('signInModal')); };
document.getElementById('openForgotPasswordModal').onclick = e => { e.preventDefault(); closeModal(document.getElementById('signInModal')); openModal(document.getElementById('forgotPasswordModal')); };
document.getElementById('closeForgotPasswordModal').onclick = () => { closeModal(document.getElementById('forgotPasswordModal')); forgotPasswordForm.reset(); };
document.getElementById('forgotPasswordModal').onclick = function(e) { if (e.target === this) { closeModal(this); forgotPasswordForm.reset(); } };
document.getElementById('signInModal').onclick = function(e) { if (e.target === this) { closeModal(this); signInForm.reset(); } };
document.getElementById('signUpModal').onclick = function(e) { if (e.target === this) { closeModal(this); signUpForm.reset(); } };
// ESC closes modals
window.addEventListener('keydown', function(e) {
    if (e.key === "Escape") {
        ['signInModal','signUpModal','forgotPasswordModal'].forEach(id=>{
            const modal=document.getElementById(id); if(modal.classList.contains('active')){closeModal(modal);}
        });
    }
});

// SIGN UP
document.getElementById('signUpForm').onsubmit = function(e) {
  e.preventDefault();
  let fullname = document.getElementById('signup-fullname').value.trim();
  let email = document.getElementById('signup-email').value.trim();
  let password = document.getElementById('signup-password').value;
  let confirmPassword = document.getElementById('signup-confirm-password').value;
  let failMsg = document.getElementById('signUpFail');
  let successMsg = document.getElementById('signUpSuccess');
  failMsg.style.display = "none"; successMsg.style.display = "none";
  if(password !== confirmPassword) {
    document.getElementById('confirmPasswordError').textContent = "Passwords do not match"; return;
  }
  document.getElementById('signUpBtn').textContent = "Creating..."; document.getElementById('signUpBtn').disabled = true;
  fetch(`${SHEETDB_API}/search?email=${encodeURIComponent(email)}`).then(res=>res.json()).then(data=>{
    if(data.length > 0){
      failMsg.textContent = "Account already exists."; failMsg.style.display = "block";
      document.getElementById('signUpBtn').disabled = false;
      document.getElementById('signUpBtn').textContent = "Create account"; return;
    }
    fetch(SHEETDB_API, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        data: [{ fullname, email, password, balance: "0" }]
      })
    }).then(res=>res.json()).then(result=>{
      if(result.created === 1){
        successMsg.textContent = "Account created! Please sign in.";
        successMsg.style.display = "block";
        setTimeout(()=>{
          closeModal(document.getElementById('signUpModal'));
          document.getElementById('signUpForm').reset();
        }, 1600);
      }else{ throw new Error("Signup failed"); }
      document.getElementById('signUpBtn').disabled = false;
      document.getElementById('signUpBtn').textContent = "Create account";
    }).catch(()=>{
      failMsg.textContent = "Sign up failed. Try again."; failMsg.style.display = "block";
      document.getElementById('signUpBtn').disabled = false;
      document.getElementById('signUpBtn').textContent = "Create account";
    });
  });
};
// SIGN IN
document.getElementById('signInForm').onsubmit = function(e) {
  e.preventDefault();
  let email = document.getElementById('signin-email').value.trim();
  let password = document.getElementById('signin-password').value;
  let failMsg = document.getElementById('signInFail');
  let successMsg = document.getElementById('signInSuccess');
  failMsg.style.display = "none"; successMsg.style.display = "none";
  document.getElementById('signInBtn').textContent = "Signing in..."; document.getElementById('signInBtn').disabled = true;
  fetch(`${SHEETDB_API}/search?email=${encodeURIComponent(email)}&password=${encodeURIComponent(password)}`)
    .then(res=>res.json())
    .then(data=>{
      document.getElementById('signInBtn').disabled = false;
      document.getElementById('signInBtn').textContent = "Sign in";
      if(Array.isArray(data) && data.length > 0){
        localStorage.setItem("user_email", data[0].email);
        localStorage.setItem("user_name", data[0].fullname);
        successMsg.textContent = "Sign in successful! Redirecting...";
        successMsg.style.display = "block";
        setTimeout(()=>{ window.location.href = "dashboard.html"; }, 1100);
      } else {
        failMsg.textContent = "Incorrect email or password."; failMsg.style.display = "block";
      }
    })
    .catch(()=>{
      document.getElementById('signInBtn').disabled = false;
      document.getElementById('signInBtn').textContent = "Sign in";
      failMsg.textContent = "Sign in failed. Try again."; failMsg.style.display = "block";
    });
};
// FORGOT PASSWORD
forgotPasswordForm.onsubmit = function(e) {
    e.preventDefault();
    document.getElementById('forgotEmailError').textContent = "";
    document.getElementById('forgotPasswordError').textContent = "";
    document.getElementById('forgotConfirmPasswordError').textContent = "";
    document.getElementById('forgotPasswordSuccess').style.display = "none";
    document.getElementById('forgotPasswordFail').style.display = "none";
    const email = document.getElementById('forgot-email').value.trim();
    const password = document.getElementById('forgot-password').value;
    const confirmPassword = document.getElementById('forgot-confirm-password').value;
    if (!email) { document.getElementById('forgotEmailError').textContent = "Email is required"; return; }
    if (!password) { document.getElementById('forgotPasswordError').textContent = "New password is required"; return; }
    if (!confirmPassword) { document.getElementById('forgotConfirmPasswordError').textContent = "Confirm your new password"; return; }
    if (password !== confirmPassword) { document.getElementById('forgotConfirmPasswordError').textContent = "Passwords do not match"; return; }
    const btn = document.getElementById('forgotPasswordBtn');
    btn.textContent = "Resetting..."; btn.disabled = true;
    fetch(`${SHEETDB_API}/email/${encodeURIComponent(email)}`, {
        method: "PATCH",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ data: { password } })
    })
    .then(res => res.ok ? res.json() : Promise.reject(res))
    .then((resData) => {
        btn.textContent = "Reset password";
        btn.disabled = false;
        if (resData.updated === 1 || resData.created === 1) {
            document.getElementById('forgotPasswordSuccess').textContent = "Password reset! You can now sign in.";
            document.getElementById('forgotPasswordSuccess').style.display = "block";
            setTimeout(() => { closeModal(document.getElementById('forgotPasswordModal')); forgotPasswordForm.reset(); }, 1800);
        } else {
            document.getElementById('forgotPasswordFail').textContent = "Email not found. Try again.";
            document.getElementById('forgotPasswordFail').style.display = "block";
        }
    })
    .catch(() => {
        btn.textContent = "Reset password";
        btn.disabled = false;
        document.getElementById('forgotPasswordFail').textContent = "Reset failed. Try again.";
        document.getElementById('forgotPasswordFail').style.display = "block";
    });
};
</script>
</body>
</html>
